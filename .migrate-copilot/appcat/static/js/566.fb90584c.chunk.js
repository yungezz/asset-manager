"use strict";(self.webpackChunkwindup_ui=self.webpackChunkwindup_ui||[]).push([[566],{79143:(e,t,n)=>{n.d(t,{B1:()=>o,BM:()=>l,KP:()=>s,OG:()=>d,S6:()=>r,t5:()=>a});const a=["mandatory","optional","potential","information","cloud-mandatory","cloud-optional"],r=e=>{switch(e){case"mandatory":return"Migration mandatory";case"optional":return"Migration optional";case"potential":return"Migration potential";case"information":return"Information";case"cloud-mandatory":return"Cloud mandatory";case"cloud-optional":return"Cloud optional";default:return e}},o=["Info","Trivial","Complex","Redesign","Architectural","Unknown"],i=e=>{switch(e){case"mandatory":return 1;case"optional":return 2;case"potential":return 3;case"cloud-mandatory":return 4;case"cloud-optional":return 5;case"information":return 6;default:return 0}};function l(e){return(t,n)=>i(e(t))-i(e(n))}function s(e,t){return(n,a)=>i(e(n))-i(e(a))||t(n).localeCompare(t(a))}const c=e=>{switch(e){case"Info":return 1;case"Trivial":return 2;case"Complex":return 3;case"Redesign":return 4;case"Architectural":return 5;case"Unknown":return 6;default:return 0}};function d(e){return(t,n)=>c(e(t))-c(e(n))}},67526:(e,t,n)=>{n.d(t,{l:()=>s,W:()=>l});var a=n(31881),r=n.n(a),o=n(44888);let i={};const l=()=>(0,o.z)({queryKey:["files"],queryFn:async()=>(await r().get("/files")).data},undefined,window.files),s=e=>(0,o.z)({queryKey:["files",e],queryFn:async()=>(await r().get("/files/".concat(e))).data},i[e],window.files_by_id?window.files_by_id[e]:void 0)},4382:(e,t,n)=>{n.d(t,{f:()=>l});var a=n(47313),r=n(31881),o=n.n(r),i=n(44888);const l=()=>{const e=(0,a.useCallback)((e=>e.map((e=>({...e,ignoredFiles:e.ignoredFiles.sort(((e,t)=>e.fileName.localeCompare(t.fileName)))})))),[]);return(0,i.z)({queryKey:["ignored-files"],queryFn:async()=>(await o().get("/ignored-files")).data,select:e},undefined,window["ignored-files"])}},67482:(e,t,n)=>{n.d(t,{J:()=>s});var a=n(47313),r=n(31881),o=n.n(r),i=n(79143),l=n(44888);const s=()=>{const e=(0,a.useCallback)((e=>e.map((e=>{const t=Object.keys(e.issues).flatMap((t=>e.issues[t].flatMap((e=>({...e,category:t})))));return{applicationId:e.applicationId,issues:t.sort((0,i.KP)((e=>e.category),(e=>e.name)))}}))),[]);return(0,l.z)({queryKey:["issues"],queryFn:async()=>(await o().get("/issues")).data,select:e},undefined,window.issues)}},79306:(e,t,n)=>{n.d(t,{h:()=>c,q:()=>s});var a=n(47313),r=n(31881),o=n.n(r),i=n(44888);let l={};const s=()=>{const e=(0,a.useCallback)((e=>{let t=[];for(const[n,a]of Object.entries(e)){const e=a.map((e=>({...e,phase:n})));t=t.concat(e)}return t}),[]);return(0,i.z)({queryKey:["rules"],queryFn:async()=>(await o().get("/rules")).data,select:e},undefined,window.rules)},c=e=>(0,i.z)({queryKey:["rules",e],queryFn:async()=>(await o().get("/rules/".concat(e))).data},l[e],window.rules_by_id?window.rules_by_id[e]:void 0)},53566:(e,t,n)=>{n.d(t,{Vr:()=>o,im:()=>He,Mm:()=>ht,eo:()=>Ze,FT:()=>Le,Uf:()=>Qe,sd:()=>Ue,ez:()=>tt,GU:()=>s,un:()=>N});var a=n(47313),r=n(46417);const o=e=>{let{when:t,then:n,children:a}=e;return t?n:a||(0,r.jsx)(r.Fragment,{})};var i=n(60096),l=n(61277);const s=e=>{let{onChange:t,options:n,value:o,placeholderText:s="Select...",...c}=e;const[d,u]=(0,a.useState)(!1);return(0,r.jsx)(i.P,{placeholderText:s,isOpen:d,onToggle:u,onSelect:(e,n)=>{t(n),"checkbox"!==c.variant&&u(!1)},selections:o,...c,children:n.map(((e,t)=>(0,r.jsx)(l.$,{value:e,..."object"===typeof e&&e.props},"".concat(t,"-").concat(e.toString()))))})};var c=n(20821),d=n(76194);const u=e=>{let{count:t,params:n,isTop:a,isCompact:o,perPageOptions:i,onChange:l}=e;const s=()=>n.perPage||10;return(0,r.jsx)(c.t,{itemCount:t,page:n.page||1,perPage:s(),onPageInput:(e,t)=>{l({page:t,perPage:s()})},onSetPage:(e,t)=>{l({page:t,perPage:s()})},onPerPageSelect:(e,t)=>{l({page:1,perPage:t})},isCompact:a||o,widgetId:"pagination-options-menu",variant:a?c.a.top:c.a.bottom,perPageOptions:(u=i||[10,20,50,100],u.map((e=>({title:String(e),value:e})))),toggleTemplate:e=>(0,r.jsx)(d.v,{...e})});var u};var g=n(47346),h=n(48892),p=n(26436),m=n(89213),f=n(79023),v=n(54065),x=n(14762),y=n(17190),j=n(85099),C=n(43457),w=n(22322),b=n(48974),k=n(13772),T=n(19726),P=n(98235),S=n(27687),I=n(63143);const M=()=>(0,r.jsxs)(b.u,{variant:b.I.small,children:[(0,r.jsx)(k.k,{icon:S.ZP,color:I.a.value}),(0,r.jsx)(T.D,{headingLevel:"h2",size:"lg",children:"Unable to connect"}),(0,r.jsx)(P.B,{children:"There was an error retrieving data. Check your connection and try again."})]});var F=n(49559);const L=()=>(0,r.jsxs)(b.u,{variant:b.I.small,children:[(0,r.jsx)(k.k,{icon:F.ZP}),(0,r.jsx)(T.D,{headingLevel:"h2",size:"lg",children:"No data available"}),(0,r.jsx)(P.B,{children:"No data available to be shown here."})]});var E=n(25462);const O=()=>(0,r.jsxs)(b.u,{variant:b.I.small,children:[(0,r.jsx)(k.k,{icon:E.ZP}),(0,r.jsx)(T.D,{headingLevel:"h2",size:"lg",children:"No results found"}),(0,r.jsx)(P.B,{children:"No results match the filter criteria. Remove all filters or clear all filters to show results."})]}),B=e=>{let{cells:t,rows:n,"aria-label":a="main-table",isLoading:o,fetchError:i,loadingVariant:l="skeleton",filtersApplied:s,noDataState:c,noSearchResultsState:d,errorState:u,...g}=e;if(o&&"none"!==l){let e=[];if("skeleton"===l)e=[...Array(10)].map((()=>({cells:[...Array(t.length)].map((()=>({title:(0,r.jsx)(v.O,{})})))})));else{if("spinner"!==l)throw new Error("Can not determine the loading state of table");e=[{heightAuto:!0,cells:[{props:{colSpan:8},title:(0,r.jsx)(x.b,{children:(0,r.jsx)(y.$,{size:"xl"})})}]}]}return(0,r.jsxs)(j.i,{"aria-label":a,cells:t,rows:e,children:[(0,r.jsx)(C.x,{}),(0,r.jsx)(w.R,{})]})}return i?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(j.i,{"aria-label":a,cells:t,rows:[],children:[(0,r.jsx)(C.x,{}),(0,r.jsx)(w.R,{})]}),u||(0,r.jsx)(M,{})]}):0===n.length?s?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(j.i,{"aria-label":a,cells:t,rows:[],children:[(0,r.jsx)(C.x,{}),(0,r.jsx)(w.R,{})]}),d||(0,r.jsx)(O,{})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(j.i,{"aria-label":a,cells:t,rows:[],children:[(0,r.jsx)(C.x,{}),(0,r.jsx)(w.R,{})]}),c||(0,r.jsx)(L,{})]}):(0,r.jsxs)(j.i,{"aria-label":a,cells:t,rows:n,...g,children:[(0,r.jsx)(C.x,{}),(0,r.jsx)(w.R,{})]})},N=e=>{let{totalCount:t,currentPage:n,onPageChange:a,hasTopPagination:o=!1,hasBottomPagination:i=!1,toolbarBulkSelector:l,toolbarToggle:s,toolbarActions:c,toolbarClearAllFilters:d,...v}=e;return(0,r.jsxs)("div",{style:{backgroundColor:"var(--pf-global--BackgroundColor--100)"},children:[(0,r.jsx)(g.o,{className:"pf-m-toggle-group-container",collapseListedFiltersBreakpoint:"xl",clearAllFilters:d,children:(0,r.jsxs)(h.c,{children:[l,s&&(0,r.jsx)(p.R,{toggleIcon:(0,r.jsx)(f.ZP,{}),breakpoint:"xl",children:s}),c,o&&(0,r.jsx)(m.E,{variant:m.A.pagination,alignment:{default:"alignRight"},children:(0,r.jsx)(u,{count:t,params:n,onChange:a,isTop:!0})})]})}),(0,r.jsx)(B,{...v}),i&&(0,r.jsx)(u,{count:t,params:n,onChange:a})]})};var A=n(42747),z=n(91970),R=n(90148),D=n(3460),q=n(29964),V=n(75071),H=n(53426),G=n(32837),K=n(98699),_=n(82685),Z=n(98362),W=n(71602),U=n(54904),J=n(53840),$=n(11459),X=n(79143),Q=n(13056),Y=n(31881),ee=n.n(Y),te=n(44888);var ne=n(16265),ae=n(67526),re=n(67482),oe=n(79306),ie=n(56954),le=n(74871),se=n(41094),ce=n(24777),de=n(38477),ue=n(60902),ge=n(54890),he=n(57736),pe=n(52076),me=n(39275),fe=n(42912),ve=n(69366),xe=n(88991),ye=n(60171),je=n(7872);const Ce=(e,t)=>[e,t.map(((e,t)=>"".concat(t+1,". [").concat(e.title,"](").concat(e.href,")"))).join("\n")].join("\n"),we=e=>{let{issue:t,onShowFile:n}=e;return(0,r.jsx)(le.K,{hasGutter:!0,children:t.affectedFiles.map(((e,a)=>(0,r.jsx)(se.v,{children:(0,r.jsxs)(ce.r,{hasGutter:!0,children:[(0,r.jsx)(de.P,{md:5,children:(0,r.jsx)(ue.Z,{isCompact:!0,isFullHeight:!0,children:(0,r.jsx)(ge.e,{children:(0,r.jsxs)(me.X,{"aria-label":"Files table",variant:"compact",children:[(0,r.jsx)(fe.h,{children:(0,r.jsxs)(ve.Tr,{children:[(0,r.jsx)(xe.Th,{children:"File"}),(0,r.jsx)(xe.Th,{children:"Incidents found"})]})}),(0,r.jsx)(ye.p,{children:e.files.map(((t,a)=>(0,r.jsxs)(ve.Tr,{children:[(0,r.jsx)(je.Td,{dataLabel:"File",modifier:"breakWord",children:(0,r.jsx)(be,{fileId:t.fileId,defaultText:t.fileName,onClick:()=>n(t.fileId,e.description)})}),(0,r.jsx)(je.Td,{dataLabel:"Incidents found",width:10,children:(0,r.jsx)(he.C,{isRead:!0,children:t.occurrences})})]},a)))})]})})})}),(0,r.jsx)(de.P,{md:7,children:(0,r.jsx)(ue.Z,{isCompact:!0,isFullHeight:!0,children:(0,r.jsx)(ge.e,{children:(0,r.jsx)(tt,{children:Ce(e.description||"",t.links)})})})})]})},a)))})},be=e=>{let{fileId:t,defaultText:n,onClick:o}=e;const i=(0,ae.W)(),l=(0,a.useMemo)((()=>{var e;return null===(e=i.data)||void 0===e?void 0:e.find((e=>e.id===t))}),[i.data,t]);return(0,r.jsx)(r.Fragment,{children:l?(0,r.jsx)(_.zx,{variant:"link",isInline:!0,onClick:o,children:(0,r.jsx)(pe.k,{content:n||l.prettyPath})}):n})},ke=(e,t)=>e.id===t.id,Te=e=>{if("string"===typeof e){const t=()=>e;return{value:e,toString:t,compareTo:n=>"string"===typeof n?t().toLowerCase().includes(n.toLocaleLowerCase()):e===n.value}}{const t=()=>e.node;return{value:e.key,toString:t,compareTo:n=>"string"===typeof n?t().toLowerCase().includes(n.toLowerCase()):e.key===n.value}}},Pe=e=>({key:e.value,node:e.toString()}),Se="DataKey",Ie=[{title:"Issue",transforms:[(0,W.d)(35),U.p],cellTransforms:[]},{title:"Category",transforms:[(0,W.d)(10)]},{title:"Source",transforms:[(0,W.d)(10)]},{title:"Target",transforms:[(0,W.d)(10)]},{title:"Level of effort",transforms:[(0,W.d)(15)],cellTransforms:[J.$G]},{title:"Total incidents",transforms:[(0,W.d)(10),U.p]},{title:"Total storypoints",transforms:[(0,W.d)(10),U.p]}],Me=(e,t,n)=>{switch(n){case 1:return e.name.localeCompare(t.name);case 6:return e.totalIncidents-t.totalIncidents;case 7:return e.totalStoryPoints-t.totalStoryPoints;default:return 0}},Fe=e=>e.DataKey,Le=e=>{var t,n,o,i,l;let{applicationId:c}=e;const[d,u]=(0,a.useState)(""),{filters:g,setFilter:h,removeFilter:p,clearAllFilters:f}=(0,ie.Sm)(),v=(0,$.Nr)(d,250),y=(0,$.Nr)(g,100),j=(0,te.z)({queryKey:["analysis-configuration"],queryFn:async()=>(await ee().get("/analysis-configuration")).data},void 0,window["analysis-configuration"]),C=(0,oe.q)(),w=(0,ne.p)(),S=(0,re.J)(),I=(0,ae.W)(),M=(0,a.useCallback)((e=>{var t;return null===(t=C.data)||void 0===t?void 0:t.find((t=>t.id===e))}),[C.data]),F=(0,ie.dd)(),L=(0,a.useMemo)((()=>null!=F.data?M(F.data.ruleId):void 0),[M,F.data]),{data:E,isOpen:O,action:B,open:W,close:U}=(0,ie.dd)(),J=(0,a.useMemo)((()=>void 0!==I.data&&void 0!==E?I.data.find((e=>e.id===(null===E||void 0===E?void 0:E.fileId))):void 0),[I.data,E]),Y=(0,a.useMemo)((()=>{var e;return null===(e=w.data)||void 0===e?void 0:e.find((e=>e.id===c))}),[w.data,c]),le=(0,a.useMemo)((()=>{var e,t;return w.data&&S.data&&void 0!==c&&(null===(e=S.data)||void 0===e||null===(t=e.find((e=>e.applicationId===c)))||void 0===t?void 0:t.issues)||[]}),[w.data,S.data,c]),se=(0,a.useMemo)((()=>{const e=new Set,t=new Set;return le.forEach((n=>{var a,r;null===(a=n.sourceTechnologies)||void 0===a||a.forEach((t=>e.add(t))),null===(r=n.targetTechnologies)||void 0===r||r.forEach((e=>t.add(e)))})),{source:Array.from(e),target:Array.from(t)}}),[le]),ce=(0,a.useMemo)((()=>{const e=(S.data||[]).flatMap((e=>e.issues)).map((e=>e.category));return Array.from(new Set(e)).sort((0,X.BM)((e=>e)))}),[S.data]),de=(0,a.useMemo)((()=>{const e=(S.data||[]).flatMap((e=>e.issues)).map((e=>e.effort.type));return Array.from(new Set(e)).sort((0,X.OG)((e=>e)))}),[S.data]),{isItemSelected:ue,toggleItemSelected:ge}=(0,A.Uq)({items:le,isEqual:ke}),{page:he,sortBy:pe,changePage:me,changeSortBy:fe}=(0,ie.HL)(),ve=(0,a.useCallback)((e=>{let t=!0;v&&v.trim().length>0&&(t=-1!==e.name.toLowerCase().indexOf(v.toLowerCase()));let n=!0;const a=y.get("category")||[];a.length>0&&(n=a.some((t=>e.category===t.key)));let r=!0;const o=y.get("levelOfEffort")||[];o.length>0&&(r=o.some((t=>e.effort.type===t.key)));let i=!0;const l=y.get("sourceTechnology")||[];l.length>0&&(i=l.some((t=>{var n;return null===(n=e.sourceTechnologies)||void 0===n?void 0:n.includes(t.key)})));let s=!0;const c=y.get("targetTechnology")||[];return c.length>0&&(s=c.some((t=>{var n;return null===(n=e.targetTechnologies)||void 0===n?void 0:n.includes(t.key)}))),t&&n&&r&&i&&s}),[v,y]),{pageItems:xe,filteredItems:ye}=(0,ie.x6)({items:le,currentPage:he,currentSortBy:pe,compareToByColumn:Me,filterItem:ve}),je=(0,a.useMemo)((()=>{const e=[];return xe.forEach((t=>{var n,a;const o=ue(t);e.push({[Se]:t,isOpen:o,cells:[{title:t.name},{title:t.category},{title:(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(z.P,{hasGutter:!0,children:null===(n=t.sourceTechnologies)||void 0===n?void 0:n.map((e=>(0,r.jsx)(R.J,{children:(0,r.jsx)(D._,{isCompact:!0,color:"blue",children:e})},e)))})})},{title:(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(z.P,{hasGutter:!0,children:null===(a=t.targetTechnologies)||void 0===a?void 0:a.map((e=>(0,r.jsx)(R.J,{children:(0,r.jsx)(D._,{isCompact:!0,color:"blue",children:e})},e)))})})},{title:t.effort.description},{title:t.totalIncidents},{title:t.totalStoryPoints}]}),o&&e.push({[Se]:t,parent:e.length-1,fullWidth:!0,cells:[{title:(0,r.jsx)("div",{className:"pf-u-m-sm",children:(0,r.jsx)(we,{issue:t,onShowFile:(e,n)=>W("showFile",{fileId:e,ruleId:t.ruleId,issueDescription:n})})})}]})})),e}),[xe,ue,W]),Ce=[{title:"View rule",onClick:(e,t,n,a)=>{const r=Fe(n);F.open("showRule",r)}}];return(0,a.useEffect)((()=>{me({page:1,perPage:he.perPage})}),[v,y,me,he.perPage]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(r.Fragment,{children:void 0===c?(0,r.jsx)(x.b,{children:(0,r.jsxs)(b.u,{children:[(0,r.jsx)(k.k,{icon:Z.ZP}),(0,r.jsx)(T.D,{headingLevel:"h4",size:"lg",children:"Select an application"}),(0,r.jsx)(P.B,{children:"Select an application whose data you want to get access to."})]})}):(0,r.jsx)(N,{rowWrapper:e=>{var t;const n=Fe(e.row),a=!(null!==(t=e.row)&&void 0!==t&&t.isExpanded);return(0,r.jsx)("tr",{children:e.children},"".concat(n.name).concat(a?"":"-expanded"))},hasTopPagination:!0,hasBottomPagination:!0,totalCount:ye.length,onCollapse:(e,t,n,a)=>{const r=Fe(a);ge(r)},sortBy:pe||{index:void 0,defaultDirection:"asc"},onSort:fe,currentPage:he,onPageChange:me,rows:je,cells:Ie,actions:Ce,isLoading:S.isLoading||w.isLoading,loadingVariant:"skeleton",fetchError:S.isError,toolbarClearAllFilters:f,filtersApplied:d.trim().length>0,toolbarToggle:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.E,{variant:"search-filter",children:(0,r.jsx)(q.M,{value:d,onChange:u,onClear:()=>u("")})}),(0,r.jsx)(V.k,{variant:"filter-group",children:(0,r.jsx)(H.p,{chips:g.get("category"),deleteChip:(e,t)=>p("category",t),deleteChipGroup:()=>h("category",[]),categoryName:{key:"category",name:"Category"},children:(0,r.jsx)(s,{maxHeight:300,variant:G.TM.checkbox,"aria-label":"category","aria-labelledby":"category",placeholderText:"Category",value:null===(t=g.get("category"))||void 0===t?void 0:t.map(Te),options:ce.map(Te),onChange:e=>{const t=e;let n;n=(g.get("category")||[]).some((e=>e.key===t.value))?(g.get("category")||[]).filter((e=>e.key!==t.value)):[...g.get("category")||[],Pe(t)],h("category",n)},hasInlineFilter:!0,onClear:()=>h("category",[])})})}),(0,r.jsx)(V.k,{variant:"filter-group",children:(0,r.jsx)(H.p,{chips:g.get("levelOfEffort"),deleteChip:(e,t)=>p("levelOfEffort",t),deleteChipGroup:()=>h("levelOfEffort",[]),categoryName:{key:"levelOfEffort",name:"Level of effort"},children:(0,r.jsx)(s,{maxHeight:300,variant:G.TM.checkbox,"aria-label":"levelOfEffort","aria-labelledby":"levelOfEffort",placeholderText:"Level effort",value:null===(n=g.get("levelOfEffort"))||void 0===n?void 0:n.map(Te),options:de.map(Te),onChange:e=>{const t=e;let n;n=(g.get("levelOfEffort")||[]).some((e=>e.key===t.value))?(g.get("levelOfEffort")||[]).filter((e=>e.key!==t.value)):[...g.get("levelOfEffort")||[],Pe(t)],h("levelOfEffort",n)},hasInlineFilter:!0,onClear:()=>h("levelOfEffort",[])})})}),(0,r.jsxs)(V.k,{variant:"filter-group",children:[se.source.length>0&&(0,r.jsx)(H.p,{chips:g.get("sourceTechnology"),deleteChip:(e,t)=>p("sourceTechnology",t),deleteChipGroup:()=>h("sourceTechnology",[]),categoryName:{key:"sourceTechnology",name:"Source"},children:(0,r.jsx)(s,{maxHeight:300,variant:G.TM.checkbox,"aria-label":"sourceTechnology","aria-labelledby":"sourceTechnology",placeholderText:"Source",value:null===(o=g.get("sourceTechnology"))||void 0===o?void 0:o.map(Te),options:se.source.map(Te),onChange:e=>{const t=e;let n;n=(g.get("sourceTechnology")||[]).some((e=>e.key===t.value))?(g.get("sourceTechnology")||[]).filter((e=>e.key!==t.value)):[...g.get("sourceTechnology")||[],Pe(t)],h("sourceTechnology",n)},hasInlineFilter:!0,onClear:()=>h("sourceTechnology",[])})}),se.target.length>0&&(0,r.jsx)(H.p,{chips:g.get("targetTechnology"),deleteChip:(e,t)=>p("targetTechnology",t),deleteChipGroup:()=>h("targetTechnology",[]),categoryName:{key:"targetTechnology",name:"Target"},children:(0,r.jsx)(s,{maxHeight:300,variant:G.TM.checkbox,"aria-label":"targetTechnology","aria-labelledby":"targetTechnology",placeholderText:"Target",value:null===(i=g.get("targetTechnology"))||void 0===i?void 0:i.map(Te),options:se.target.map(Te),onChange:e=>{const t=e;let n;n=(g.get("targetTechnology")||[]).some((e=>e.key===t.value))?(g.get("targetTechnology")||[]).filter((e=>e.key!==t.value)):[...g.get("targetTechnology")||[],Pe(t)],h("targetTechnology",n)},hasInlineFilter:!0,onClear:()=>h("targetTechnology",[])})})]}),(null===(l=j.data)||void 0===l?void 0:l.exportCSV)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.E,{variant:"separator"}),(0,r.jsx)(m.E,{children:(0,r.jsx)("a",{className:"pf-c-button pf-m-primary ",href:Q.s===c?"./AllIssues.csv":"".concat(null===Y||void 0===Y?void 0:Y.name.replaceAll(".","_").replaceAll("-","_"),".csv"),rel:"noopener noreferrer",target:"_blank",children:"Export CSV"})})]})]})})}),(0,r.jsx)(K.u,{title:"Rule: ".concat(null===L||void 0===L?void 0:L.id),isOpen:F.isOpen&&"showRule"===F.action,onClose:F.close,variant:"large",children:L&&(0,r.jsx)(Ue,{ruleId:L.id})}),(0,r.jsx)(K.u,{title:"File ".concat(null===J||void 0===J?void 0:J.prettyPath),isOpen:O&&"showFile"===B,onClose:U,variant:"default",position:"top",disableFocusTrap:!0,actions:[(0,r.jsx)(_.zx,{variant:"primary",onClick:U,children:"Close"},"close")],children:J&&(0,r.jsx)(ht,{file:J,hintToFocus:J.hints.filter((e=>e.ruleId===(null===E||void 0===E?void 0:E.ruleId)&&e.content===E.issueDescription)).reduce(((e,t)=>e?t.line<e.line?t:e:t),void 0)})})]})};var Ee=n(76934),Oe=n(90555),Be=n(22420),Ne=n(80752),Ae=n(36898),ze=n(14303);const Re=(e,t)=>e.name===t.name&&e.version===t.version&&e.sha1===t.sha1,De="DataKey",qe=[{title:"Name",transforms:[(0,W.d)(100),U.p],cellTransforms:[J.$G]}],Ve=(e,t,n)=>1===n?e.name.localeCompare(t.name):0,He=e=>{let{applicationId:t}=e;const[n,o]=(0,a.useState)(""),i=(0,ne.p)(),l=(()=>{const e=(0,a.useCallback)((e=>e.map((e=>({...e,dependencies:e.dependencies.sort(((e,t)=>e.name.localeCompare(t.name)))})))),[]);return(0,te.z)({queryKey:["dependencies"],queryFn:async()=>(await ee().get("/dependencies")).data,select:e},void 0,window.dependencies)})(),s=(0,a.useMemo)((()=>{return t===Q.s?[...l.data||[]].filter((e=>{var t;const n=null===(t=i.data)||void 0===t?void 0:t.find((t=>t.id===e.applicationId));return!(null!==n&&void 0!==n&&n.isVirtual)})).flatMap((e=>e.dependencies)).reduce(((e,t)=>{const n=e.find((e=>Re(e,t)));return n?[...e.filter((e=>!Re(e,t))),{...t,foundPaths:[...n.foundPaths,...t.foundPaths]}]:[...e,t]}),[]):(null===(e=l.data)||void 0===e||null===(n=e.find((e=>e.applicationId===t)))||void 0===n?void 0:n.dependencies)||[];var e,n}),[l.data,i.data,t]),{isItemSelected:c,toggleItemSelected:d}=(0,A.Uq)({items:s,isEqual:Re}),{page:u,sortBy:g,changePage:h,changeSortBy:p}=(0,ie.HL)(),{pageItems:f,filteredItems:v}=(0,ie.x6)({items:s,currentPage:u,currentSortBy:g,compareToByColumn:Ve,filterItem:e=>{let t=!0;return n&&n.trim().length>0&&(t=-1!==e.name.toLowerCase().indexOf(n.toLowerCase())),t}}),y=(e=>{const t=[];return e.forEach((e=>{const n=c(e);t.push({[De]:e,isOpen:n,cells:[{title:e.name}]}),n&&t.push({parent:t.length-1,fullWidth:!0,cells:[{title:(0,r.jsx)("div",{className:"pf-u-m-md",children:(0,r.jsxs)(Ee.o,{isHorizontal:!0,children:[(0,r.jsxs)(Oe.g,{children:[(0,r.jsx)(Be.M,{children:"Maven URL"}),(0,r.jsx)(Ne.b,{children:(0,r.jsx)("a",{target:"_blank",rel:"noreferrer",href:'http://search.maven.org/?eh#search|ga|1|1:"'.concat(e.sha1,'"'),children:"Maven Central Link"})})]}),(0,r.jsxs)(Oe.g,{children:[(0,r.jsx)(Be.M,{children:"SHA1 hash"}),(0,r.jsx)(Ne.b,{children:e.sha1})]}),e.version&&(0,r.jsxs)(Oe.g,{children:[(0,r.jsx)(Be.M,{children:"Version"}),(0,r.jsx)(Ne.b,{children:e.version})]}),e.organization&&(0,r.jsxs)(Oe.g,{children:[(0,r.jsx)(Be.M,{children:"Organization"}),(0,r.jsx)(Ne.b,{children:e.organization})]}),(0,r.jsxs)(Oe.g,{children:[(0,r.jsx)(Be.M,{children:"Found at path"}),(0,r.jsx)(Ne.b,{children:(0,r.jsx)(Ae.aV,{children:e.foundPaths.map(((e,t)=>(0,r.jsx)(ze.H,{children:e},t)))})})]})]})})}]})})),t})(f);return(0,a.useEffect)((()=>{h({page:1,perPage:u.perPage})}),[t,h,u.perPage]),(0,r.jsx)(r.Fragment,{children:void 0===t?(0,r.jsx)(x.b,{children:(0,r.jsxs)(b.u,{children:[(0,r.jsx)(k.k,{icon:Z.ZP}),(0,r.jsx)(T.D,{headingLevel:"h4",size:"lg",children:"Select an application"}),(0,r.jsx)(P.B,{children:"Select an application whose data you want to get access to."})]})}):(0,r.jsx)(N,{hasTopPagination:!0,hasBottomPagination:!0,totalCount:v.length,onCollapse:(e,t,n,a)=>{const r=(e=>e.DataKey)(a);d(r)},sortBy:g||{index:void 0,defaultDirection:"asc"},onSort:p,currentPage:u,onPageChange:h,rows:y,cells:qe,actions:[],isLoading:l.isFetching,loadingVariant:"skeleton",fetchError:l.isError,filtersApplied:n.trim().length>0,toolbarToggle:(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(m.E,{variant:"search-filter",children:(0,r.jsx)(q.M,{value:n,onChange:o,onClear:()=>o("")})})})})})};var Ge=n(4382);const Ke=[{title:"Name",transforms:[U.p],cellTransforms:[J.kZ]},{title:"Path",transforms:[],cellTransforms:[J.kZ]},{title:"Ignored reason",transforms:[],cellTransforms:[J.kZ]}],_e=(e,t,n)=>1===n?e.fileName.localeCompare(t.fileName):0,Ze=e=>{let{applicationId:t}=e;const[n,o]=(0,a.useState)(""),i=(0,Ge.f)(),l=(0,a.useMemo)((()=>{var e,n;return t===Q.s?[...i.data||[]].flatMap((e=>e.ignoredFiles)):(null===(e=i.data)||void 0===e||null===(n=e.find((e=>e.applicationId===t)))||void 0===n?void 0:n.ignoredFiles)||[]}),[i.data,t]),{page:s,sortBy:c,changePage:d,changeSortBy:u}=(0,ie.HL)(),{pageItems:g,filteredItems:h}=(0,ie.x6)({items:l,currentPage:s,currentSortBy:c,compareToByColumn:_e,filterItem:e=>{let t=!0;return n&&n.trim().length>0&&(t=-1!==e.fileName.toLowerCase().indexOf(n.toLowerCase())),t}}),p=(e=>{const t=[];return e.forEach((e=>{t.push({DataKey:e,cells:[{title:e.fileName},{title:e.filePath},{title:e.reason}]})})),t})(g);return(0,r.jsx)(r.Fragment,{children:void 0===t?(0,r.jsx)(x.b,{children:(0,r.jsxs)(b.u,{children:[(0,r.jsx)(k.k,{icon:Z.ZP}),(0,r.jsx)(T.D,{headingLevel:"h4",size:"lg",children:"Select an application"}),(0,r.jsx)(P.B,{children:"Select an application whose data you want to get access to."})]})}):(0,r.jsx)(N,{hasTopPagination:!0,hasBottomPagination:!0,totalCount:h.length,sortBy:c||{index:void 0,defaultDirection:"asc"},onSort:u,currentPage:s,onPageChange:d,rows:p,cells:Ke,actions:[],isLoading:i.isFetching,loadingVariant:"skeleton",fetchError:i.isError,filtersApplied:n.trim().length>0,toolbarToggle:(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(m.E,{variant:"search-filter",children:(0,r.jsx)(q.M,{value:n,onChange:o,onClear:()=>o("")})})})})})};var We=n(20512);const Ue=e=>{var t,n;let{ruleId:i,props:l}=e;const s=(0,oe.h)(i),c=(0,a.useRef)(),d=(0,a.useRef)();return(0,a.useEffect)((()=>()=>{var e;null===(e=d.current)||void 0===e||e.editor.getModels().forEach((e=>e.dispose()))}),[d]),(0,r.jsx)(o,{when:s.isLoading,then:(0,r.jsx)("span",{children:"Loading..."}),children:(0,r.jsx)(We.p,{isDarkTheme:!0,isLineNumbersVisible:!0,isReadOnly:!0,isMinimapVisible:!0,isLanguageLabelVisible:!0,isDownloadEnabled:!0,code:null===(t=s.data)||void 0===t?void 0:t.content,language:null!==(n=s.data)&&void 0!==n&&n.content.startsWith("<rule")?We.S.xml:We.S.java,onEditorDidMount:(e,t)=>{e.layout(),e.focus(),t.editor.getModels()[0].updateOptions({tabSize:5}),c.current=e,d.current=t},height:"600px",...l},i)})};var Je=n(38853),$e=n(13171),Xe=n(95677);const Qe=e=>{let{application:t}=e;const n=(0,te.z)({queryKey:["packages-incidents"],queryFn:async()=>(await ee().get("/packages-incidents")).data},void 0,window["packages-incidents"]),o=(0,a.useMemo)((()=>{var e;const a=null===(e=n.data)||void 0===e?void 0:e.find((e=>e.applicationId===t.id)),r=(null===a||void 0===a?void 0:a.packages)||{},o=Object.entries(r).map((e=>{let[t,n]=e;return{packageName:t,packageCount:n}})).sort(((e,t)=>t.packageCount-e.packageCount)),i=o.slice(0,9),l=o.length>9?[{packageName:"Other",packageCount:o.slice(9-o.length).reduce(((e,t)=>e+t.packageCount),0)}]:[];return i.concat(l)}),[t,n.data]);return(0,r.jsxs)(ue.Z,{isFullHeight:!0,children:[(0,r.jsx)(Xe.l,{children:"Java Incidents by Package"}),(0,r.jsx)(ge.e,{style:{height:"400px"},children:(0,r.jsx)(x.b,{children:(0,r.jsx)(Je.HS,{constrainToVisibleArea:!0,data:o.map((e=>({x:e.packageName,y:e.packageCount}))),labels:e=>{let{datum:t}=e;return"".concat(t.x,": ").concat(t.y)},legendData:o.map((e=>({name:"".concat(e.packageName," (").concat(e.packageCount,")")}))),legendOrientation:"vertical",legendPosition:"right",padding:{bottom:10,left:10,right:140,top:10},subTitle:"Incidents",title:o.reduce(((e,t)=>e+t.packageCount),0).toString(),themeColor:$e.nz.multiOrdered,width:400,height:400,innerRadius:100})})})]})};var Ye=n(60514),et=n(15871);n(94133);const tt=e=>{let{...t}=e;return(0,r.jsx)(Ye.D,{className:"markdown-body",remarkPlugins:[et.Z],linkTarget:"_blank",...t})};var nt=n(35958),at=n(43648),rt=n(68951),ot=n(54263),it=n(86993),lt=n(36621),st=n(96134),ct=n(17823),dt=n(20711),ut=n(49284),gt=n(27706);const ht=e=>{var t;let{file:n,props:i,lineToFocus:l,hintToFocus:s}=e;const c=(0,oe.q)(),d=(0,ae.l)(n.id),u=(0,a.useRef)(),g=(0,a.useRef)();(0,a.useEffect)((()=>()=>{var e,t;null===(e=g.current)||void 0===e||e.editor.getModels().forEach((e=>e.dispose())),null===(t=u.current)||void 0===t||t.dispose()}),[u,g]);const[h,p]=(0,a.useState)([]);(0,a.useEffect)((()=>()=>{h.forEach((e=>e&&e.dispose()))}),[h]);const m=a.useRef(),[f,v]=(0,a.useState)(!!s),[x,y]=(0,a.useState)(s),j=(e,t)=>{e.layout(),e.focus(),t.editor.getModels()[0].updateOptions({tabSize:5});const a=(null===n||void 0===n?void 0:n.hints)||[];let r=[];((e,t,n)=>{const a=n.map((e=>{var n;const a=null===(n=c.data)||void 0===n?void 0:n.find((t=>t.id===e.ruleId));return{startLineNumber:e.line,startColumn:0,endLineNumber:e.line,endColumn:1e3,message:e.content,source:null===a||void 0===a?void 0:a.id,severity:t.MarkerSeverity.Warning}})),r=t.editor.getModels()[0];t.editor.setModelMarkers(r,"*",a)})(0,t,(null===n||void 0===n?void 0:n.hints)||[]);const o=((e,t,n)=>{const a=n.map((n=>({range:new t.Range(n.line,1,n.line,1),id:"view-hint",command:{title:"View Hint",id:e.addCommand(0,(()=>{y(n),v(!0)}),"")}})));return t.languages.registerCodeLensProvider("*",{provideCodeLenses:(e,t)=>({lenses:a,dispose:()=>{}}),resolveCodeLens:(e,t,n)=>t})})(e,t,a);r.push(o),((e,t,n)=>{const a=n.map((e=>({range:new t.Range(e.line,1,e.line,1),options:{isWholeLine:!0,glyphMarginClassName:"windupGlyphMargin"}})));e.deltaDecorations([],a)})(e,t,a);const i=((e,t,n)=>n.map((e=>t.languages.registerHoverProvider("*",{provideHover:(n,a)=>{if(a.lineNumber===e.line)return{range:new t.Range(e.line,1,e.line,1),contents:[{value:Ce(e.content,e.links)}]}}}))))(0,t,a);r=r.concat(i),p(r);s&&s.line&&e.revealLineNearTop(s.line+5),l&&e.revealLineNearTop(l+5),u.current=e,g.current=t};return(0,r.jsx)(nt.dy,{isExpanded:f,onExpand:()=>{m.current&&m.current.focus()},isInline:!0,children:(0,r.jsx)(at.s,{panelContent:(0,r.jsx)(rt.S,{isResizable:!0,defaultSize:"800px",minSize:"350px",children:(0,r.jsx)(ot.h,{children:(0,r.jsxs)(ue.Z,{isLarge:!0,children:[(0,r.jsxs)(it.O,{children:[(0,r.jsx)(lt.T,{hasNoOffset:!0,children:(0,r.jsx)(st.x,{children:(0,r.jsx)(ct.c,{onClick:()=>v(!1)})})}),(0,r.jsx)(Xe.l,{children:(0,r.jsxs)(dt.D,{children:[(0,r.jsx)(ut.x,{component:"h1",children:null===x||void 0===x?void 0:x.title}),(0,r.jsxs)(ut.x,{component:"small",children:["Line: ",null===x||void 0===x?void 0:x.line]})]})})]}),(0,r.jsx)(ge.e,{children:x&&(0,r.jsx)(tt,{children:Ce(x.content,x.links)})})]})})}),children:(0,r.jsx)(gt.s,{children:(0,r.jsx)(o,{when:d.isLoading,then:(0,r.jsx)("span",{children:"Loading..."}),children:(0,r.jsx)(We.p,{isDarkTheme:!0,isLineNumbersVisible:!0,isReadOnly:!0,isMinimapVisible:!0,isLanguageLabelVisible:!0,isDownloadEnabled:!0,code:null===(t=d.data)||void 0===t?void 0:t.content,language:Object.values(We.S).find((e=>e===n.sourceType.toLowerCase())),options:{glyphMargin:!0,"semanticHighlighting.enabled":!0,renderValidationDecorations:"on"},onEditorDidMount:(e,t)=>{j(e,t)},height:"".concat(window.innerHeight-300,"px"),...i})})})})})}},56954:(e,t,n)=>{n.d(t,{QM:()=>j,dd:()=>c,x6:()=>u,HL:()=>f,Xv:()=>S,Sm:()=>x});var a=n(47313),r=n(19720);const o=(0,r.createAction)("useModal/action/openModalWithData")(),i=(0,r.createAction)("useModal/action/startClose")(),l={action:void 0,data:void 0,isOpen:!1},s=(e,t)=>{switch(t.type){case(0,r.getType)(o):return{...e,action:t.payload.action,data:t.payload.data,isOpen:!0};case(0,r.getType)(i):return{...e,action:void 0,data:void 0,isOpen:!1};default:return e}},c=()=>{const[e,t]=(0,a.useReducer)(s,{...l}),n=(0,a.useCallback)(((e,n)=>{t(o({action:e,data:n}))}),[]),r=(0,a.useCallback)((()=>{t(i())}),[]);return{action:e.action,data:e.data,isOpen:e.isOpen,open:n,close:r,isAction:t=>e.action===t}};var d=n(39880);const u=e=>{let{items:t,currentSortBy:n,currentPage:r,filterItem:o,compareToByColumn:i}=e;return(0,a.useMemo)((()=>{const e=[...t||[]].filter(o);let a,l=!1;a=[...e].sort(((e,t)=>{const a=i(e,t,null===n||void 0===n?void 0:n.index);return 0!==a&&(l=!0),a})),l&&(null===n||void 0===n?void 0:n.direction)===d.B.desc&&(a=a.reverse());return{pageItems:a.slice((r.page-1)*r.perPage,r.page*r.perPage),filteredItems:e}}),[t,r,n,i,o])},g=(0,r.createAction)("useTableControls/pagination/change")(),h=(0,r.createAction)("useTableControls/sortBy/change")(),p={changed:!1,currentPage:{page:1,perPage:10},sortBy:void 0},m=(e,t)=>{switch(t.type){case(0,r.getType)(g):return{...e,changed:!0,currentPage:{page:t.payload.page,perPage:t.payload.perPage}};case(0,r.getType)(h):return{...e,changed:!0,sortBy:{index:t.payload.index,direction:t.payload.direction}};default:return e}},f=e=>{const[t,n]=(0,a.useReducer)(m,{...p,currentPage:e&&e.page?{...e.page}:{...p.currentPage},sortBy:e&&e.sortBy?{...e.sortBy}:p.sortBy}),r=(0,a.useCallback)((e=>{var t;n(g({page:e.page>=1?e.page:1,perPage:null!==(t=e.perPage)&&void 0!==t?t:p.currentPage.perPage}))}),[]),o=(0,a.useCallback)(((e,t,a,r)=>{n(h({index:t,direction:a}))}),[]);return{page:t.currentPage,sortBy:t.sortBy,changePage:r,changeSortBy:o}},v=e=>"string"===typeof e?e:e.key,x=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map;const[t,n]=(0,a.useState)(e),r=Array.from(t.values()).reduce(((e,t)=>[...e,...t]),[]).length>0,o=(e,t)=>{n((n=>{const a=n.get(e)||[];return new Map(n).set(e,[...a,t])}))},i=(e,t)=>{n((n=>new Map(n).set(e,t)))},l=(e,t)=>{n((n=>{let a;a=Array.isArray(t)?[...t]:[t];const r=(n.get(e)||[]).filter((e=>{const t=v(e);return!a.some((e=>{const n=v(e);return t===n}))}));return new Map(n).set(e,r)}))},s=()=>{n((e=>{const t=new Map(e);return Array.from(t.keys()).forEach((e=>{t.set(e,[])})),t}))};return{filters:t,isPresent:r,addFilter:o,setFilter:i,removeFilter:l,clearAllFilters:s}},y={isSelected:!1},j=e=>{let{rows:t,columns:n}=e;const[r,o]=(0,a.useState)(new Map),i=(e,t)=>{var n;const a=null===(n=r.get(e))||void 0===n?void 0:n.get(t);return!!a&&a.isSelected};return{isCellSelected:i,isSomeCellSelected:(e,t)=>t.some((t=>{var n;return null===(n=r.get(e))||void 0===n?void 0:n.get(t)})),toggleCellSelected:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:!i(e,t);const a=r.get(e)||new Map,l=a.get(t)||{...y},s=(new Map).set(t,{...l,isSelected:n}),c=new Map(r).set(e,s);o(c)}}},C=["View","Connect","Store","Sustain","Execute"];var w=n(13056),b=n(16265),k=n(31881),T=n.n(k),P=n(44888);const S=e=>{let{applicationId:t,hideEmptyCategoryOptions:n}=e;const r=(0,b.p)(),o=(()=>{const e=(0,a.useCallback)((e=>e.map((e=>{const t=Object.entries(e.technologyGroups).map((e=>{let[t,n]=e;return{[t]:Object.entries(n).map((e=>{let[t,n]=e;return{[t]:{total:Object.entries(n).reduce(((e,t)=>{let[n,a]=t;return e+a}),0),tags:{...n}}}})).reduce(((e,t)=>({...e,...t})),{})}})).reduce(((e,t)=>({...e,...t})),{});return{applicationId:e.applicationId,technologyGroups:t}}))),[]);return(0,P.z)({queryKey:["technologies"],queryFn:async()=>(await T().get("/technologies")).data,select:e},void 0,window.technologies)})(),i=(0,a.useMemo)((()=>{const e=e=>e.reduce(((e,t)=>{var n;const a=null===(n=o.data)||void 0===n?void 0:n.find((e=>e.applicationId===t.id));if(a){const n={application:t,technologyGroups:a.technologyGroups};return[...e,n]}return e}),[]);if(t===w.s){return e((r.data||[]).filter((e=>!e.isVirtual)))}{var n;const a=null===(n=r.data)||void 0===n?void 0:n.find((e=>e.id===t));return e(a?[a]:[])}}),[r.data,o.data,t]),l=(0,a.useCallback)((e=>{const t=()=>e.node;return{value:e.key,toString:t,compareTo:n=>"string"===typeof n?t().toLowerCase().includes(n.toLowerCase()):e.key===n.value}}),[]),s=(0,a.useMemo)((()=>i.length>0?C.reduce(((e,t)=>{const a=i[0].technologyGroups[t],r=Object.keys(a).length,o=Object.entries(a).map((e=>{let[t,{total:n}]=e;return n})).reduce(((e,t)=>e+t),0);return o>0||!n?[...e,l({key:t,node:n?t:"".concat(t," (").concat(r,")")})]:e}),[]):C.map((e=>l({key:e,node:e})))),[n,i,l]);return{applications:i,categoryOptions:s,allApplications:r,allTechnologies:o}}}}]);