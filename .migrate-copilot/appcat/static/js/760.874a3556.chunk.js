"use strict";(self.webpackChunkwindup_ui=self.webpackChunkwindup_ui||[]).push([[760],{25760:(e,i,n)=>{n.r(i),n.d(i,{default:()=>se});var s=n(47313),t=n(97890),a=n(96093),l=n(24777),r=n(38477),o=n(60902),d=n(95677),c=n(54890),h=n(31881),p=n.n(h),u=n(44888);const x=()=>(0,u.z)({queryKey:["applications-details"],queryFn:async()=>(await p().get("/applications-details")).data},undefined,window["applications-details"]);var m=n(53566),j=n(42747),g=n(3460),f=n(74871),v=n(41094),y=n(76934),P=n(90555),F=n(22420),C=n(80752),T=n(36898),M=n(14303),I=n(75071),k=n(89213),b=n(82685),w=n(70987),S=n(71602),B=n(56954),H=n(52076),N=n(48441),A=n(95613),z=n(57736),E=n(98699),O=n(13056),V=n(67526),D=n(67482),R=n(46417);const _=[{title:"Name",transforms:[(0,S.d)(40)],cellTransforms:[]},{title:"Tags",transforms:[(0,S.d)(20)],cellTransforms:[]},{title:"Issues",transforms:[],cellTransforms:[]},{title:"Story points",transforms:[],cellTransforms:[]}],q=e=>{var i;let{applicationFile:n}=e;const t=(0,B.dd)(),[a]=(0,s.useState)(""),l=(0,D.J)(),r=(0,V.W)(),o=(0,s.useMemo)((()=>n.childrenFileIds.map((e=>{var i;return{...{id:e,fullPath:"",prettyPath:"",prettyFileName:"",hints:[],tags:[],classificationsAndHintsTags:[],sourceType:"",storyPoints:-1},...null===(i=r.data)||void 0===i?void 0:i.find((i=>i.id===e))}}))),[r.data,n]),d=(0,s.useCallback)((e=>(l.data||[]).filter((e=>e.applicationId!==O.s)).flatMap((e=>e.issues)).filter((i=>i.affectedFiles.flatMap((e=>e.files)).find((i=>i.fileId===e))))),[l.data]),{page:c,sortBy:h,changePage:p,changeSortBy:u}=(0,B.HL)(),{pageItems:x,filteredItems:j}=(0,B.x6)({items:o,currentPage:c,currentSortBy:h,compareToByColumn:()=>0,filterItem:e=>!0}),f=(e=>{const i=[];return e.forEach((e=>{const n=d(e.id)||[];i.push({DataKey:e,cells:[{title:(0,R.jsx)(b.zx,{variant:"link",onClick:()=>t.open("showFile",e),children:(0,R.jsx)(H.k,{content:e.prettyFileName})})},{title:(0,R.jsxs)(N.k,{children:[e.tags.map((e=>(0,R.jsx)(A.B,{spacer:{default:"spacerXs"},children:(0,R.jsx)(g._,{color:"IMPORTANT"===e.level?"red":"grey",isCompact:!0,children:e.name})},e.name))),e.classificationsAndHintsTags.map((e=>(0,R.jsx)(A.B,{spacer:{default:"spacerXs"},children:(0,R.jsx)(g._,{color:"grey",isCompact:!0,children:e})},e)))]})},{title:(0,R.jsx)(T.aV,{component:T.ns.ol,type:T.mr.number,children:n.map(((i,n)=>{const s=i.affectedFiles.flatMap((e=>e.files)).filter((i=>i.fileId===e.id)).reduce(((e,i)=>e+i.occurrences),0);return(0,R.jsxs)(M.H,{children:[i.name," ",(0,R.jsx)(z.C,{isRead:!0,children:s})]},i.name)}))})},{title:e.storyPoints}]})})),i})(x);return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(m.un,{variant:"compact",hasTopPagination:!0,hasBottomPagination:!0,totalCount:j.length,sortBy:h||{index:void 0,defaultDirection:"asc"},onSort:u,currentPage:c,onPageChange:p,rows:f,cells:_,actions:[],isLoading:r.isFetching,loadingVariant:"skeleton",fetchError:r.isError,filtersApplied:a.trim().length>0}),(0,R.jsx)(E.u,{title:"File ".concat(null===t||void 0===t||null===(i=t.data)||void 0===i?void 0:i.prettyFileName),isOpen:t.isOpen&&"showFile"===t.action,onClose:t.close,variant:"default",position:"top",disableFocusTrap:!0,actions:[(0,R.jsx)(b.zx,{variant:"primary",onClick:t.close,children:"Close"},"close")],children:t.data&&(0,R.jsx)(m.Mm,{file:t.data})})]})};var K=n(33707),W=n(63366),L=n(58297),Z=n(38808),G=n(58944);const X=e=>{let{applicationFile:i}=e;const n=(0,u.z)({queryKey:["tags"],queryFn:async()=>(await p().get("/tags")).data},void 0,window.tags),t=(0,V.W)(),a=(0,s.useMemo)((()=>i.flatMap((e=>e.childrenFileIds)).map((e=>{var i;return{...{id:e,fullPath:"",prettyPath:"",prettyFileName:"",hints:[],tags:[],classificationsAndHintsTags:[],sourceType:"",storyPoints:-1},...null===(i=t.data)||void 0===i?void 0:i.find((i=>i.id===e))}}))),[t.data,i]),l=(0,s.useMemo)((()=>a&&n.data?a.flatMap((e=>[...e.tags.map((e=>e.name)),...e.classificationsAndHintsTags])).reduce(((e,i)=>{const s=((e,i)=>{const n=e.find((e=>e.name===i));if(!n)return null;let s=[n],t=[];const a=[i],l=n.isRoot?[n]:[];for(;0!==s.length;){t=[];for(let i=0;i<s.length;i++){const n=s[i];for(let i=0;i<n.parentsTagNames.length;i++){const s=n.parentsTagNames[i];if(-1!==a.indexOf(s))continue;a.push(s);const r=e.find((e=>e.name===s));r&&(r.isRoot?l.push(r):t.push(r))}}s=t}return l})(n.data,i);return null===s||void 0===s||s.forEach((i=>{var n;const s=i.title||i.name;e.set(s,(null!==(n=e.get(s))&&void 0!==n?n:0)+1)})),e}),new Map):new Map),[a,n.data]);return(0,R.jsx)(R.Fragment,{children:(0,R.jsx)("div",{style:{height:"250px",width:"600px"},children:(0,R.jsxs)(K.k,{containerComponent:(0,R.jsx)(W.H,{labels:e=>{let{datum:i}=e;return"".concat(i.y)},constrainToVisibleArea:!0}),height:250,width:600,padding:{bottom:50,left:200,right:10,top:10},domainPadding:{x:[15,15]},children:[(0,R.jsx)(L.C,{}),(0,R.jsx)(L.C,{dependentAxis:!0}),(0,R.jsx)(Z.G,{offset:11,horizontal:!0,children:(0,R.jsx)(G.B,{data:Array.from(l.keys()).sort().map((e=>({name:"Tag",x:e,y:l.get(e)})))})})]})})})},U="DataKey",J=[{title:"File name",transforms:[(0,S.d)(90)],cellTransforms:[]},{title:"Story points",transforms:[(0,S.d)(10)],cellTransforms:[]}],Q=e=>{let{application:i}=e;const[n]=(0,s.useState)(""),t=x(),a=(0,s.useMemo)((()=>{var e,n;return(null===(e=t.data)||void 0===e||null===(n=e.find((e=>e.applicationId===(null===i||void 0===i?void 0:i.id))))||void 0===n?void 0:n.applicationFiles)||[]}),[t.data,i]),{isItemSelected:h,toggleItemSelected:p,selectAll:u,setSelectedItems:S}=(0,j.Uq)({items:a,isEqual:(e,i)=>e.fileId===i.fileId}),{page:H,sortBy:N,changePage:A,changeSortBy:z}=(0,B.HL)(),{pageItems:E,filteredItems:O}=(0,B.x6)({items:a,currentPage:H,currentSortBy:N,compareToByColumn:()=>0,filterItem:e=>!0}),V=(e=>{const i=[];return e.forEach((e=>{var n;const s=h(e);var t,a;(i.push({[U]:e,isOpen:s,cells:[{title:(0,R.jsxs)(R.Fragment,{children:[e.maven.duplicatePaths?e.fileName:e.rootPath," ",(null===(n=e.maven.duplicatePaths)||void 0===n?void 0:n.length)&&(0,R.jsx)(g._,{isCompact:!0,color:"blue",icon:(0,R.jsx)(w.ZP,{}),children:"Included multiple times"})]})},{title:e.storyPoints}]}),s)&&i.push({parent:i.length-1,fullWidth:!0,noPadding:!0,cells:[{title:(0,R.jsx)("div",{className:"pf-u-m-md",children:(0,R.jsxs)(f.K,{children:[(0,R.jsx)(v.v,{className:"pf-u-mx-lg",children:(0,R.jsxs)(l.r,{hasGutter:!0,lg:6,children:[(0,R.jsx)(r.P,{children:(0,R.jsxs)(y.o,{isHorizontal:!0,isCompact:!0,children:[(0,R.jsxs)(P.g,{children:[(0,R.jsx)(F.M,{children:"Story points"}),(0,R.jsx)(C.b,{children:e.storyPoints})]}),(0,R.jsxs)(P.g,{children:[(0,R.jsx)(F.M,{children:"Maven coordinates"}),(0,R.jsx)(C.b,{children:e.maven.mavenIdentifier})]}),(0,R.jsxs)(P.g,{children:[(0,R.jsx)(F.M,{children:"Organization"}),(0,R.jsx)(C.b,{children:(0,R.jsx)(T.aV,{isPlain:!0,children:null===(t=e.maven.organizations)||void 0===t?void 0:t.map((e=>(0,R.jsx)(M.H,{children:e},e)))})})]}),(0,R.jsxs)(P.g,{children:[(0,R.jsx)(F.M,{children:"Name"}),(0,R.jsx)(C.b,{children:e.maven.name})]}),(0,R.jsxs)(P.g,{children:[(0,R.jsx)(F.M,{children:"Version"}),(0,R.jsx)(C.b,{children:e.maven.version})]}),(0,R.jsxs)(P.g,{children:[(0,R.jsx)(F.M,{children:"Links"}),(0,R.jsx)(C.b,{children:(0,R.jsxs)(T.aV,{isPlain:!0,children:[e.maven.projectSite&&(0,R.jsx)(M.H,{children:(0,R.jsx)("a",{target:"_blank",rel:"noreferrer",href:e.maven.projectSite,children:"Project site"})}),e.maven.sha1&&(0,R.jsx)(M.H,{children:(0,R.jsx)("a",{target:"_blank",rel:"noreferrer",href:'http://search.maven.org/?eh#search|ga|1|1:"'.concat(e.maven.sha1,'"'),children:"Maven Central"})})]})})]}),(0,R.jsxs)(P.g,{children:[(0,R.jsx)(F.M,{children:"Description"}),(0,R.jsx)(C.b,{children:e.maven.description})]}),(0,R.jsxs)(P.g,{children:[(0,R.jsx)(F.M,{children:"Duplicates"}),(0,R.jsx)(C.b,{children:(0,R.jsx)(T.aV,{children:null===(a=e.maven.duplicatePaths)||void 0===a?void 0:a.map(((e,i)=>(0,R.jsx)(M.H,{children:e},i)))})})]})]})}),(0,R.jsx)(r.P,{children:(0,R.jsxs)(o.Z,{isPlain:!0,isCompact:!0,children:[(0,R.jsx)(d.l,{children:"Tags found - Occurrence found"}),(0,R.jsx)(c.e,{children:(0,R.jsx)(X,{applicationFile:[e]})})]})})]})}),(0,R.jsx)(v.v,{children:(0,R.jsx)(q,{applicationFile:e})})]})})}]})})),i})(E);return(0,R.jsx)(R.Fragment,{children:(0,R.jsxs)(o.Z,{children:[(0,R.jsx)(d.l,{children:"Archive files"}),(0,R.jsx)(c.e,{children:(0,R.jsx)(m.un,{hasTopPagination:!0,hasBottomPagination:!0,totalCount:O.length,onCollapse:(e,i,n,s)=>{const t=(e=>e.DataKey)(s);p(t)},sortBy:N||{index:void 0,defaultDirection:"asc"},onSort:z,currentPage:H,onPageChange:A,rows:V,cells:J,actions:[],isLoading:t.isFetching,loadingVariant:"skeleton",fetchError:t.isError,filtersApplied:n.trim().length>0,toolbarToggle:(0,R.jsx)(R.Fragment,{children:(0,R.jsxs)(I.k,{variant:"button-group",children:[(0,R.jsx)(k.E,{children:(0,R.jsx)(b.zx,{variant:b.Wu.link,onClick:()=>S([]),children:"Collapse all"})}),(0,R.jsx)(k.E,{children:(0,R.jsx)(b.zx,{variant:b.Wu.link,onClick:()=>u(),children:"Expand all"})})]})})})})]})})};var Y=n(39275),$=n(60171),ee=n(69366),ie=n(7872);const ne=e=>{let{application:i}=e;const n=x(),t=(0,s.useMemo)((()=>{var e;return null===(e=n.data)||void 0===e?void 0:e.find((e=>e.applicationId===(null===i||void 0===i?void 0:i.id)))}),[n.data,i]),a=(0,B.dd)();return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(Y.X,{children:(0,R.jsx)($.p,{children:null===t||void 0===t?void 0:t.messages.map(((e,i)=>(0,R.jsx)(ee.Tr,{children:(0,R.jsxs)(ie.Td,{children:[e.value," ",(0,R.jsx)(b.zx,{variant:b.Wu.link,onClick:()=>a.open("showRule",e.ruleId),children:"View rule"})]})},i)))})}),(0,R.jsx)(E.u,{title:"Rule: ".concat(null===a||void 0===a?void 0:a.data),isOpen:a.isOpen&&"showRule"===a.action,onClose:a.close,variant:"large",children:a.data&&(0,R.jsx)(m.sd,{ruleId:a.data})})]})},se=()=>{const e=(0,t.bx)(),i=x(),n=(0,s.useMemo)((()=>{var n,s;return(null===(n=i.data)||void 0===n||null===(s=n.find((i=>i.applicationId===(null===e||void 0===e?void 0:e.id))))||void 0===s?void 0:s.applicationFiles)||[]}),[i.data,e]);return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(a.NP,{children:(0,R.jsxs)(l.r,{hasGutter:!0,md:6,children:[(0,R.jsx)(r.P,{children:(0,R.jsxs)(o.Z,{isFullHeight:!0,children:[(0,R.jsx)(d.l,{children:"Tags found - Occurrence found"}),(0,R.jsx)(c.e,{children:(0,R.jsx)(X,{applicationFile:n})})]})}),(0,R.jsx)(r.P,{children:(0,R.jsxs)(o.Z,{isFullHeight:!0,children:[(0,R.jsx)(d.l,{children:"Messages"}),(0,R.jsx)(c.e,{children:e&&(0,R.jsx)(ne,{application:e})})]})})]})}),(0,R.jsx)(a.NP,{children:e&&(0,R.jsx)(m.Uf,{application:e})}),(0,R.jsx)(a.NP,{children:e&&(0,R.jsx)(Q,{application:e})})]})}}}]);